<!--
    [VIEW: INVENTORY]
    Inventário de hardware:
    - KPIs (totais, servidores, offline, >6 meses)
    - Filtros e botões de ação
    - Campo de busca
    - Tabela dinâmica preenchida via JS
-->

<section id="view-inventory" class="fade-in space-y-6 hidden">

    <!-- KPIs superiores: visão rápida de totais -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">

        <!-- Total de máquinas -->
        <div
            class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 hover:shadow-md transition">
            <div class="flex justify-between items-center">
                <div>
                    <p class="text-xs font-bold text-gray-400 dark:text-slate-500 uppercase">Total Máquinas</p>
                    <h3 class="text-3xl font-black text-indigo-600 dark:text-indigo-400 mt-1" id="comp-total">--</h3>
                </div>
                <div class="p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg text-indigo-600 dark:text-indigo-400">
                    <i data-lucide="monitor" class="w-6 h-6"></i>
                </div>
            </div>
        </div>

        <!-- Total de servidores -->
        <div
            class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 hover:shadow-md transition">
            <div class="flex justify-between items-center">
                <div>
                    <p class="text-xs font-bold text-gray-400 dark:text-slate-500 uppercase">Servidores</p>
                    <h3 class="text-3xl font-black text-purple-600 dark:text-purple-400 mt-1" id="comp-servers">--</h3>
                </div>
                <div class="p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg text-purple-600 dark:text-purple-400">
                    <i data-lucide="server" class="w-6 h-6"></i>
                </div>
            </div>
        </div>

        <!-- Máquinas offline -->
        <div
            class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 hover:shadow-md transition">
            <div class="flex justify-between items-center">
                <div>
                    <p class="text-xs font-bold text-gray-400 dark:text-slate-500 uppercase">Máquinas Offlines</p>
                    <h3 class="text-3xl font-black text-red-500 dark:text-red-400 mt-1" id="comp-offline">--</h3>
                </div>
                <div class="p-3 bg-red-50 dark:bg-red-900/20 rounded-lg text-red-500 dark:text-red-400">
                    <i data-lucide="power-off" class="w-6 h-6"></i>
                </div>
            </div>
        </div>

        <!-- Máquinas sem logon há > 6 meses -->
        <div
            class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 hover:shadow-md transition">
            <div class="flex justify-between items-center">
                <div>
                    <p class="text-xs font-bold text-gray-400 dark:text-slate-500 uppercase">> 6 Meses Offline</p>
                    <h3 class="text-3xl font-black text-orange-500 dark:text-orange-400 mt-1" id="comp-stale">--</h3>
                </div>
                <div class="p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg text-orange-500 dark:text-orange-400">
                    <i data-lucide="archive" class="w-6 h-6"></i>
                </div>
            </div>
        </div>

    </div>

    <!-- Container principal da tabela + filtros -->
    <div
        class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 flex flex-col h-[75vh] lg:h-[600px]">

        <!-- Barra de título + botões de ação -->
        <div class="flex flex-col sm:flex-row justify-between items-center mb-4 gap-4 flex-shrink-0">

            <!-- Título da seção -->
            <h3 class="text-lg font-bold text-gray-700 dark:text-slate-200 flex items-center gap-2">
                <i data-lucide="hard-drive" class="w-5 h-5 text-indigo-500"></i>
                Inventário de Hardware
            </h3>

            <!-- Botões de ação e filtros -->
            <div
                class="flex flex-row flex-wrap gap-2 w-full xl:w-auto items-center mt-4 xl:mt-0 justify-start xl:justify-end">

                <!-- Atualizar inventário -->
                <button onclick="loadInventory({ force: true })"
                    class="h-8 group flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg transition-all text-sm font-semibold shadow-lg hover:shadow-xl">
                    <i data-lucide="refresh-cw"
                        class="w-4 h-4 group-hover:rotate-180 transition-transform duration-500"></i>
                    Atualizar
                </button>

                <!-- Exportar CSV -->
                <button onclick="exportCSV()"
                    class="h-8 flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-green-500 to-green-600 hover:bg-green-700 text-white text-sm font-semibold rounded-lg shadow-sm transition-colors">
                    <i data-lucide="download" class="w-4 h-4"></i>
                    Exportar
                </button>

                <!-- Filtros: todos / PCs / servers -->
                <div class="flex bg-gray-100 dark:bg-slate-700 p-1 rounded-lg h-8 items-center">
                    <button onclick="setCompFilter('all')" id="btn-filter-all"
                        class="px-3 py-1 text-xs rounded-md transition-all filter-btn-active">Todos</button>

                    <button onclick="setCompFilter('workstation')" id="btn-filter-workstation"
                        class="px-3 py-1 text-xs rounded-md text-gray-500 dark:text-slate-400 hover:text-gray-700 dark:hover:text-white transition-all">
                        PCs
                    </button>

                    <button onclick="setCompFilter('server')" id="btn-filter-server"
                        class="px-3 py-1 text-xs rounded-md text-gray-500 dark:text-slate-400 hover:text-gray-700 dark:hover:text-white transition-all">
                        Servers
                    </button>
                </div>

                <!-- Filtro de >6 meses -->
                <button onclick="toggleSixMonths()" id="btn-six-months"
                    class="h-8 flex items-center gap-1 px-3 py-1.5 border border-red-200 dark:border-red-900 text-red-500 dark:text-red-400 text-xs font-medium rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-all">
                    <i data-lucide="alert-circle" class="w-3 h-3"></i> > 6 Meses
                </button>

                <!-- Campo de busca -->
                <div class="relative w-full sm:w-auto min-w-[180px]">
                    <i data-lucide="search" class="absolute left-2.5 top-2 text-gray-400 w-3.5 h-3.5"></i>
                    <input type="text" id="compSearchInput" placeholder="Buscar..."
                        class="h-8 w-full pl-8 pr-3 py-1.5 bg-gray-50 dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-lg text-xs focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
            </div>
        </div>

        <!-- Container com scroll da tabela -->
        <div
            class="overflow-hidden border border-gray-200 dark:border-slate-700 rounded-lg flex-1 flex flex-col min-h-0">

            <div class="overflow-y-auto custom-scrollbar flex-1">

                <!-- Tabela do inventário (preenchida via JS) -->
                <table class="w-full text-left text-sm text-gray-500 dark:text-slate-400">

                    <!-- Cabeçalho da tabela com ordenação -->
                    <thead
                        class="bg-gray-50 dark:bg-slate-700 text-xs uppercase text-gray-700 dark:text-slate-200 font-bold sticky top-0 shadow-sm z-10">
                        <tr>

                            <!-- Ordenação por Hostname -->
                            <th onclick="sortCompTable('hostname')"
                                class="px-6 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-600 group">
                                Hostname <i data-lucide="chevrons-up-down" class="w-3 h-3 inline ml-1 opacity-50"></i>
                            </th>

                            <!-- Ordenação por nome do SO -->
                            <th onclick="sortCompTable('os_name')"
                                class="px-6 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-600 group">
                                SO <i data-lucide="chevrons-up-down" class="w-3 h-3 inline ml-1 opacity-50"></i>
                            </th>

                            <!-- Ordenação por versão -->
                            <th onclick="sortCompTable('os_version')"
                                class="px-6 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-600 group">
                                Versão <i data-lucide="chevrons-up-down" class="w-3 h-3 inline ml-1 opacity-50"></i>
                            </th>

                            <!-- Ordenação por último logon -->
                            <th onclick="sortCompTable('last_logon')"
                                class="px-6 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-600 group">
                                Último Logon <i data-lucide="chevrons-up-down"
                                    class="w-3 h-3 inline ml-1 opacity-50"></i>
                            </th>

                            <!-- Ordenação por status -->
                            <th onclick="sortCompTable('is_active')"
                                class="px-6 py-3 text-center cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-600 group">
                                Status <i data-lucide="chevrons-up-down" class="w-3 h-3 inline ml-1 opacity-50"></i>
                            </th>

                            <!-- Ações: botão de excluir etc -->
                            <th class="px-6 py-3 text-center hover:bg-gray-100 dark:hover:bg-slate-600 group">
                                Ações
                            </th>

                        </tr>
                    </thead>

                    <!-- Corpo da tabela, preenchido dinamicamente -->
                    <tbody id="comp-table-body"
                        class="divide-y divide-gray-100 dark:divide-slate-700 bg-white dark:bg-slate-800">
                        <tr>
                            <td colspan="5" class="text-center py-10 text-gray-400">
                                Carregando inventário...
                            </td>
                        </tr>
                    </tbody>

                </table>
            </div>
        </div>
    </div>
</section>